function removeAllChildNodes(parent){for(;parent.firstChild;)parent.removeChild(parent.firstChild);return parent}function switchPosition(clickedReg){let currentPlot=document.getElementById("current-plot"),previousPlot=document.getElementById("previous-plot"),currentRegId=currentPlot.dataset.hasOwnProperty("id")?currentPlot.dataset.id:-1,previousRegId=previousPlot.dataset.hasOwnProperty("id")?previousPlot.dataset.id:-1;-1!=previousRegId&&JS9.ChangeRegions(previousRegId,{color:"black"}),currentPlot=removeAllChildNodes(currentPlot),previousPlot=removeAllChildNodes(previousPlot),-1!=currentRegId&&loadPlot(currentRegId,"previous-plot","white"),loadPlot(clickedReg,"current-plot","#A907F8")}function loadPlot(regionId,containerId,colour){let plotPath="cygnus/plots/reg",plotContainer=document.getElementById(containerId),plotTitle=document.createElement("div");JS9.ChangeRegions(regionId,{color:colour}),plotTitle.innerHTML=`Region ${regionId} <span style="display:inline-block; width:20px; height:20px; border-radius:50%; background-color:${colour}; vertical-align: middle;"></span>`,plotTitle.style="font-family: monospace; font-size: 13px;";let iframe=document.createElement("iframe");Object.assign(iframe,{width:"97vw",height:"190%",scrolling:"no",seamless:"seamless",frameborder:"0"}),iframe.src=`http://${location.host}/${plotPath}${regionId}.html`,plotContainer=removeAllChildNodes(plotContainer),plotContainer.dataset.id=regionId,plotContainer.title=`Plot for region ${regionId}`,plotContainer.appendChild(plotTitle),plotContainer.appendChild(iframe)}function lodLosPlots(im,xreg){let xregTagNum=Number(xreg.tags[0])+1;Number.isInteger(xregTagNum)?(console.log(`Region ID: ${xreg.id} ${xregTagNum==xreg.id?"does":"doesn't"} match tag number: ${xregTagNum}`),JS9.ChangeRegions(tags=xregTagNum,{color:"#A907F8",strokeWidth:8}),switchPosition(xregTagNum)):alert("No plots available for the selected region")}function loadLosRegs(){JS9.LoadRegions("images/cyg_los.reg")}function initialiseCygnus(){JS9.CloseImage({clear:!0}),JS9.Preload("images/CYG-0.75-SLO-I.FITS",{zoom:"toFit",colormap:"inferno",scale:"linear",scalemin:-.009,scalemax:.5,onload:loadLosRegs,fits2fits:!0})}